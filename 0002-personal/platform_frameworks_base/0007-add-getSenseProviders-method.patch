From 4633e997f2b851cf4de98a553055af19e6ce4bb5 Mon Sep 17 00:00:00 2001
From: mytja <mitja@severkar.eu>
Date: Sun, 8 Sep 2024 16:06:44 +0200
Subject: [PATCH 7/7] add getSenseProviders() method

Co-authored-by: Chris Crump <chriscrawford893@gmail.com>
Co-authored-by: Adithya R <gh0strider.2k18.reborn@gmail.com>
Co-authored-by: Alberto Ponces <ponces26@gmail.com>
---
 .../biometrics/sensors/face/FaceService.java   | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

diff --git a/services/core/java/com/android/server/biometrics/sensors/face/FaceService.java b/services/core/java/com/android/server/biometrics/sensors/face/FaceService.java
index 08caa649ebf3..6ada92b5d021 100644
--- a/services/core/java/com/android/server/biometrics/sensors/face/FaceService.java
+++ b/services/core/java/com/android/server/biometrics/sensors/face/FaceService.java
@@ -696,6 +696,24 @@ public class FaceService extends SystemService {
             return providers;
         }
 
+        private List<ServiceProvider> getSenseProviders() {
+            final List<ServiceProvider> providers = new ArrayList<>();
+            if (SenseUtils.canUseProvider()) {
+                FaceSensorPropertiesInternal props = new FaceSensorPropertiesInternal(
+                        SenseProvider.DEVICE_ID,
+                        SensorProperties.STRENGTH_WEAK,
+                        1, /** maxEnrollmentsPerUser **/
+                        new ArrayList(),
+                        FaceSensorProperties.TYPE_RGB,
+                        false, /** supportsFaceDetection **/
+                        false, /** supportsSelfIllumination **/
+                        false); /** resetLockoutRequiresChallenge **/
+                SenseProvider provider = new SenseProvider(getContext(), mBiometricStateCallback, props, mLockoutResetDispatcher);
+                providers.add(provider);
+            }
+            return providers;
+        }
+
         @android.annotation.EnforcePermission(android.Manifest.permission.USE_BIOMETRIC_INTERNAL)
         public void registerAuthenticators(
                 @NonNull List<FaceSensorPropertiesInternal> hidlSensors) {
-- 
2.25.1

